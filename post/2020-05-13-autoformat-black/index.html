<!doctype html>
<html lang="en-US">
  <head>
    


  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: 'unsafe-inline' 'unsafe-eval'; worker-src 'self' blob:; connect-src 'self' wss: data:; font-src 'self' https: data:; img-src 'self' https: data:; object-src 'none'">


    <meta name="generator" content="After Dark Hugo">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autoformatação de Código ― Quando e Como | After Dark</title>
    <meta name="description" content="Uma descrição da minha jornada desde odiar formatadores automáticos até usá-los em tudo">
    <meta name="keywords" content="black, python">
    
    
    
    
    <meta property="og:title" content="Autoformatação de Código ― Quando e Como" />
<meta property="og:description" content="Uma descrição da minha jornada desde odiar formatadores automáticos até usá-los em tudo" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://domain.example/post/2020-05-13-autoformat-black/" />
<meta property="og:image" content="https://source.unsplash.com/collection/983219/2000x1322"/>
<meta property="article:published_time" content="2020-05-13T20:49:47-03:00" />
<meta property="article:modified_time" content="2020-05-13T20:49:47-03:00" />

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://source.unsplash.com/collection/983219/2000x1322"/>

<meta name="twitter:title" content="Autoformatação de Código ― Quando e Como"/>
<meta name="twitter:description" content="Uma descrição da minha jornada desde odiar formatadores automáticos até usá-los em tudo"/>

    



  <meta property="og:image" content="https://source.unsplash.com/collection/983219/2000x1322">


    

    
    
  <meta name="referrer" content="same-origin">


    
    
    <script integrity="sha512-2t0yyNrUdtn9WGIoBVxq5vtoJQYfoDQDbqRPpOb75f1hiL39DGLdJKDrGP60fBhXfrFeKyVhzWJvHvLgln/ElA==">/*! Fetch Inject v2.0.4 | Copyright (C) Josh Habdas <jhabdas@protonmail.com> (https://habd.as) | @license Zlib */
var fetchInject=function(){"use strict";const e=function(e,t,r,n,o,c,i){c=t.createElement(r),i=t.getElementsByTagName(r)[0],c.appendChild(t.createTextNode(n.text)),c.onload=o(n),i?i.parentNode.insertBefore(c,i):t.head.appendChild(c)};return function(t,r){if(!arguments.length)return Promise.reject(new ReferenceError("Failed to execute 'fetchInject': 1 argument required but only 0 present."));if(arguments[0]&&arguments[0].constructor!==Array)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 1 must be of type 'Array'."));if(arguments[1]&&arguments[1].constructor!==Promise)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 2 must be of type 'Promise'."));const n=[],o=r?[].concat(r):[],c=[];return t.forEach(e=>o.push(window.fetch(e).then(e=>[e.clone().text(),e.blob()]).then(e=>Promise.all(e).then(e=>{n.push({text:e[0],blob:e[1]})})))),Promise.all(o).then(()=>(n.forEach(t=>{c.push({then:r=>{t.blob.type.includes("text/css")?e(window,document,"style",t,r):e(window,document,"script",t,r)}})}),Promise.all(c)))}}();
</script>
    <script integrity="sha512-2XlvnxweZhaHgBdCoOK0PoCUWiSfKibb&#43;RCRZNgqLdvbnx0ZH67FDGKQqmpqCerjMJbZFv6fsXgbmJOOA9K&#43;qA==">/*!
 * Copyright (C) 2019  Josh Habdas <jhabdas@protonmail.com>
 *
 * This file is part of After Dark.
 *
 * After Dark is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * After Dark is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

fetchInject(["/js/lazysizes.min.js"]);
</script>
    


  
    

  <meta title="mod:fractal-forest" content="status:enabled">
  
    <script async src=/js/bpgdec8a.js integrity=sha384-8PG0go3BW8hLm63KbTxk/hNcehaoSbrAhKzsmy2Jhs/KY8QdiKKkjhdeyHY/Q/0I&#10;></script>
  


  
  
  
  


    
    <link rel="canonical" href="https://domain.example/post/2020-05-13-autoformat-black/">
    
    
    <link rel="icon" sizes="any" href="data:image/svg+xml,%3Csvg%20viewBox='0%200%2046%2045'%20xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EAfter%20Dark%3C/title%3E%3Cpath%20d='M.708%2045L23%20.416%2045.292%2045H.708zM35%2038L23%2019%2011%2038h24z'%20fill='%23000'/%3E%3C/svg%3E">

    

  
  
  
  
  
  
  
    
      
        <style>html{font-size:12px}*{box-sizing:border-box;text-rendering:geometricPrecision}body{font-size:1rem;line-height:1.5rem;margin:0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;word-wrap:break-word}h1,h2,h3,h4,h5,h6{line-height:1.3em}fieldset{border:none;padding:0;margin:0}pre{padding:2rem;margin:1.75rem 0;background-color:#fff;border:1px solid #ccc;overflow:auto}code[class*=language-],pre[class*=language-],pre code{font-weight:100;text-shadow:none;margin:1.75rem 0}a{cursor:pointer;color:#ff2e88;text-decoration:none;border-bottom:1px solid #ff2e88}a:hover{background-color:#ff2e88;color:#fff}.grid{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.grid.\-top{-ms-flex-align:start;align-items:flex-start}.grid.\-middle{-ms-flex-align:center;align-items:center}.grid.\-bottom{-ms-flex-align:end;align-items:flex-end}.grid.\-stretch{-ms-flex-align:stretch;align-items:stretch}.grid.\-baseline{-ms-flex-align:baseline;align-items:baseline}.grid.\-left{-ms-flex-pack:start;justify-content:flex-start}.grid.\-center{-ms-flex-pack:center;justify-content:center}.grid.\-right{-ms-flex-pack:end;justify-content:flex-end}.grid.\-between{-ms-flex-pack:justify;justify-content:space-between}.grid.\-around{-ms-flex-pack:distribute;justify-content:space-around}.cell{-ms-flex:1;flex:1;box-sizing:border-box}@media screen and (min-width:768px){.cell.\-1of12{-ms-flex:0 0 8.33333%;flex:0 0 8.33333%}.cell.\-2of12{-ms-flex:0 0 16.66667%;flex:0 0 16.66667%}.cell.\-3of12{-ms-flex:0 0 25%;flex:0 0 25%}.cell.\-4of12{-ms-flex:0 0 33.33333%;flex:0 0 33.33333%}.cell.\-5of12{-ms-flex:0 0 41.66667%;flex:0 0 41.66667%}.cell.\-6of12{-ms-flex:0 0 50%;flex:0 0 50%}.cell.\-7of12{-ms-flex:0 0 58.33333%;flex:0 0 58.33333%}.cell.\-8of12{-ms-flex:0 0 66.66667%;flex:0 0 66.66667%}.cell.\-9of12{-ms-flex:0 0 75%;flex:0 0 75%}.cell.\-10of12{-ms-flex:0 0 83.33333%;flex:0 0 83.33333%}.cell.\-11of12{-ms-flex:0 0 91.66667%;flex:0 0 91.66667%}}@media screen and (max-width:768px){.grid{-ms-flex-direction:column;flex-direction:column}.cell{-ms-flex:0 0 auto;flex:0 0 auto}}.hack,.hack blockquote,.hack code,.hack em,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack strong{font-size:1rem;font-style:normal;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.hack blockquote,.hack code,.hack em,.hack strong{line-height:20px}.hack blockquote,.hack code,.hack footer,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack header,.hack li,.hack ol,.hack p,.hack section,.hack ul{float:none;margin:0;padding:0}.hack blockquote,.hack h1,.hack ol,.hack p,.hack ul{margin-top:20px;margin-bottom:20px}.hack h1{position:relative;display:inline-block;display:table-cell;padding:20px 0 30px;margin:0;overflow:hidden}.hack h1:after{content:"====================================================================================================";position:absolute;bottom:10px;left:0}.hack h1+*{margin-top:0}.hack h2,.hack h3,.hack h4,.hack h5,.hack h6{position:relative;margin-bottom:1.75rem}.hack h2:before,.hack h3:before,.hack h4:before,.hack h5:before,.hack h6:before{display:inline}.hack h2:before{content:"## "}.hack h3:before{content:"### "}.hack h4:before{content:"#### "}.hack h5:before{content:"##### "}.hack h6:before{content:"###### "}.hack li{position:relative;display:block;padding-left:20px}.hack li:after{position:absolute;top:0;left:0}.hack ul>li:after{content:"-"}.hack ol{counter-reset:a}.hack ol>li:after{content:counter(a) ".";counter-increment:a}.hack ol li:nth-child(n+10):after{left:-7px}.hack blockquote{position:relative;padding-left:17px;padding-left:2ch;overflow:hidden}.hack blockquote:after{content:">\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>";white-space:pre;position:absolute;top:0;left:0;line-height:20px}.hack em:after,.hack em:before{content:"*";display:inline}.hack pre code:after,.hack pre code:before{content:""}.hack code{font-weight:700}.hack code:after,.hack code:before{content:"`";display:inline}.hack hr{position:relative;height:20px;overflow:hidden;border:0;margin:20px 0}.hack hr:after{content:"----------------------------------------------------------------------------------------------------";position:absolute;top:0;left:0;line-height:20px;width:100%;word-wrap:break-word}@-moz-document url-prefix(){.hack h1{display:block}}.hack-ones ol>li:after{content:"1."}p{margin:0 0 1.75rem}.container{max-width:70rem}.container,.container-fluid{margin:0 auto;padding:0 1rem}.inner{padding:1rem}.inner2x{padding:2rem}.pull-left{float:left}.pull-right{float:right}.progress-bar{height:8px;opacity:.8;background-color:#ccc;margin-top:12px}.progress-bar.progress-bar-show-percent{margin-top:38px}.progress-bar-filled{background-color:gray;height:100%;transition:width .3s ease;position:relative;width:0}.progress-bar-filled:before{content:"";border:6px solid transparent;border-top-color:gray;position:absolute;top:-12px;right:-6px}.progress-bar-filled:after{color:gray;content:attr(data-filled);display:block;font-size:12px;white-space:nowrap;position:absolute;border:6px solid transparent;top:-38px;right:0;-ms-transform:translateX(50%);transform:translateX(50%)}table{width:100%;border-collapse:collapse;margin:1.75rem 0;color:#778087}table td,table th{vertical-align:top;border:1px solid #ccc;line-height:15px;padding:10px}table thead th{font-size:10px}table tbody td:first-child{font-weight:700;color:#333}.form{width:30rem}.form-group{margin-bottom:1.75rem;overflow:auto}.form-group label{border-bottom:2px solid #ccc;color:#333;width:10rem;display:inline-block;height:38px;line-height:38px;padding:0;float:left;position:relative}.form-group.form-success label{color:#4caf50!important;border-color:#4caf50!important}.form-group.form-warning label{color:#ff9800!important;border-color:#ff9800!important}.form-group.form-error label{color:#f44336!important;border-color:#f44336!important}.form-control{outline:none;border:none;border-bottom:2px solid #ccc;padding:.5rem 0;width:20rem;height:38px;background-color:transparent}.form-control:focus{border-color:#555}.form-group.form-textarea label:after{position:absolute;content:"";width:2px;background-color:#fff;right:-2px;top:0;bottom:0}textarea.form-control{height:auto;resize:none;padding:1rem 0;border-bottom:2px solid #ccc;border-left:2px solid #ccc;padding:.5rem}select.form-control{border-radius:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}.help-block{color:#999;margin-top:.5rem}.form-actions{margin-bottom:1.75rem}.btn{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;outline:none;padding:.65rem 2rem;font-size:1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;z-index:1}.btn:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.12)}.btn.btn-ghost{border-color:#757575;color:#757575;background-color:transparent}.btn.btn-ghost:focus,.btn.btn-ghost:hover{border-color:#424242;color:#424242;z-index:2}.btn.btn-ghost:hover{background-color:transparent}.btn-block{width:100%;display:-ms-flexbox;display:flex}.btn-default{color:#fff;background-color:#e0e0e0;border:1px solid #e0e0e0;color:#333}.btn-default:focus:not(.btn-ghost),.btn-default:hover{background-color:#dcdcdc;border-color:#dcdcdc}.btn-success{color:#fff;background-color:#4caf50;border:1px solid #4caf50}.btn-success:focus:not(.btn-ghost),.btn-success:hover{background-color:#43a047;border-color:#43a047}.btn-success.btn-ghost{border-color:#4caf50;color:#4caf50}.btn-success.btn-ghost:focus,.btn-success.btn-ghost:hover{border-color:#388e3c;color:#388e3c;z-index:2}.btn-error{color:#fff;background-color:#f44336;border:1px solid #f44336}.btn-error:focus:not(.btn-ghost),.btn-error:hover{background-color:#e53935;border-color:#e53935}.btn-error.btn-ghost{border-color:#f44336;color:#f44336}.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{border-color:#d32f2f;color:#d32f2f;z-index:2}.btn-warning{color:#fff;background-color:#ff9800;border:1px solid #ff9800}.btn-warning:focus:not(.btn-ghost),.btn-warning:hover{background-color:#fb8c00;border-color:#fb8c00}.btn-warning.btn-ghost{border-color:#ff9800;color:#ff9800}.btn-warning.btn-ghost:focus,.btn-warning.btn-ghost:hover{border-color:#f57c00;color:#f57c00;z-index:2}.btn-info{color:#fff;background-color:#00bcd4;border:1px solid #00bcd4}.btn-info:focus:not(.btn-ghost),.btn-info:hover{background-color:#00acc1;border-color:#00acc1}.btn-info.btn-ghost{border-color:#00bcd4;color:#00bcd4}.btn-info.btn-ghost:focus,.btn-info.btn-ghost:hover{border-color:#0097a7;color:#0097a7;z-index:2}.btn-primary{color:#fff;background-color:#2196f3;border:1px solid #2196f3}.btn-primary:focus:not(.btn-ghost),.btn-primary:hover{background-color:#1e88e5;border-color:#1e88e5}.btn-primary.btn-ghost{border-color:#2196f3;color:#2196f3}.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{border-color:#1976d2;color:#1976d2;z-index:2}.btn-group{overflow:auto}.btn-group .btn{float:left}.btn-group .btn-ghost:not(:first-child){margin-left:-1px}.card{border:1px solid #ccc}.card .card-header{color:#333;text-align:center;background-color:#ddd;padding:.5rem 0}.alert{color:#ccc;padding:1rem;border:1px solid #ccc;margin-bottom:1.75rem}.alert-success{color:#4caf50;border-color:#4caf50}.alert-error{color:#f44336;border-color:#f44336}.alert-info{color:#00bcd4;border-color:#00bcd4}.alert-warning{color:#ff9800;border-color:#ff9800}.media:not(:last-child){margin-bottom:1.25rem}.media-left{padding-right:1rem}.media-left,.media-right{display:table-cell;vertical-align:top}.media-right{padding-left:1rem}.media-body{display:table-cell;vertical-align:top}.media-heading{font-size:1.16667rem;font-weight:700}.media-content{margin-top:.3rem}.avatarholder,.placeholder{background-color:#f0f0f0;text-align:center;color:#b9b9b9;font-size:1rem;border:1px solid #f0f0f0}.avatarholder{width:48px;height:48px;line-height:46px;font-size:2rem;background-size:cover;background-position:50%;background-repeat:no-repeat}.avatarholder.rounded{border-radius:33px}.loading{display:inline-block;content:"&nbsp;";height:20px;width:20px;margin:0 .5rem;animation:a .6s infinite linear;border:2px solid #e91e63;border-right-color:transparent;border-radius:50%}.btn .loading{margin-bottom:0;width:14px;height:14px}.btn div.loading{float:left}.alert .loading{margin-bottom:-5px}@keyframes a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.menu{width:100%}.menu .menu-item{display:block;color:#616161;border-color:#616161}.menu .menu-item.active,.menu .menu-item:hover{color:#000;border-color:#000;background-color:transparent}@media screen and (max-width:768px){.form-group label{display:block;border-bottom:none;width:100%}.form-group.form-textarea label:after{display:none}.form-control{width:100%}textarea.form-control{border-left:none;padding:.5rem 0}pre::-webkit-scrollbar{height:3px}}@media screen and (max-width:480px){.form{width:100%}}.dark{color:#ccc}.dark,.dark pre{background-color:#000}.dark pre{padding:0;border:none}.dark pre code{color:#00bcd4}.dark h1 a,.dark h2 a,.dark h3 a,.dark h4 a,.dark h5 a{color:#ccc}.dark code,.dark strong{color:#fff}.dark code{font-weight:100}.dark table{color:#ccc}.dark table td,.dark table th{border-color:#444}.dark table tbody td:first-child{color:#fff}.dark .form-group label{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-group.form-textarea label:after{background-color:#000}.dark .form-control{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-control:focus{border-color:#ccc;color:#ccc}.dark textarea.form-control{color:#ccc}.dark .card{border-color:rgba(95,95,95,.78)}.dark .card .card-header{background-color:transparent;color:#ccc;border-bottom:1px solid rgba(95,95,95,.78)}.dark .btn.btn-ghost.btn-default{border-color:#ababab;color:#ababab}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#9c9c9c;color:#9c9c9c;z-index:1}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#e0e0e0;color:#e0e0e0}.dark .btn.btn-ghost.btn-primary:focus,.dark .btn.btn-ghost.btn-primary:hover{border-color:#64b5f6;color:#64b5f6}.dark .btn.btn-ghost.btn-success:focus,.dark .btn.btn-ghost.btn-success:hover{border-color:#81c784;color:#81c784}.dark .btn.btn-ghost.btn-info:focus,.dark .btn.btn-ghost.btn-info:hover{border-color:#4dd0e1;color:#4dd0e1}.dark .btn.btn-ghost.btn-error:focus,.dark .btn.btn-ghost.btn-error:hover{border-color:#e57373;color:#e57373}.dark .btn.btn-ghost.btn-warning:focus,.dark .btn.btn-ghost.btn-warning:hover{border-color:#ffb74d;color:#ffb74d}.dark .avatarholder,.dark .placeholder{background-color:transparent;border-color:#333}.dark .menu .menu-item{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .menu .menu-item.active,.dark .menu .menu-item:hover{color:#fff;border-color:#ccc}/*!* Copyright (C) 2019 Josh Habdas <jhabdas@protonmail.com>
*
* This file is part of After Dark.
*
* After Dark is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* After Dark is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU Affero General Public License for more details.
*
* You should have received a copy of the GNU Affero General Public License
* along with this program. If not, see <https://www.gnu.org/licenses/>.*/:root{scroll-behavior:smooth;--screen-size-small: 30em}@keyframes intro{0%{opacity:0}100%{opacity:1}}.blur-up.lazyloading{filter:blur(5px);opacity:1;transition:opacity 1s,filter 1.5s}.blur-up.lazyload{opacity:0;filter:blur(10px)}.blur-up.lazyloaded{filter:blur(0);transition:filter 1s}.hack .readmore{margin-bottom:2.2em}.responsive-iframe,.ratio-container{position:relative;padding-bottom:56.25%;padding-top:25px;height:0}.responsive-iframe iframe,.ratio-container>*:not([itemprop=caption]){position:absolute;top:0;left:0;width:100%;height:100%}iframe{border:0}main,footer{animation:intro .3s both;animation-delay:.15s}header:first-of-type+details{margin:20px 0}footer time[datetime$=M]:before{content:"\2013\0020"}body>footer p.muted{margin-bottom:0}@media only screen and (max-width:768px){footer time[datetime$=M]{display:none}}blockquote cite{display:block}blockquote cite::before{content:"\2014\00A0"}:target{filter:brightness(1.2)}:disabled{cursor:not-allowed}.hack li ul{margin:0}.hack ol li{padding-left:27px}.main{padding:20px 10px}input.form-control{border-radius:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}input.form-control,textarea.form-control,select.form-control,.help-block{font-size:initial}@media only screen and (max-width:768px){.help-block{font-size:unset}}html{font-size:13px}.hack .form input,.hack .form textarea,.hack .form button,.hack .form label{font-size:1rem}.hack .alert .highlight:first-of-type .chroma,.hack .card .highlight:first-of-type .chroma,.hack .alert pre:first-of-type,.hack .alert p:first-of-type,.hack .card pre:first-of-type,.hack .card p:first-of-type{margin-top:unset}.hack .alert .highlight:last-of-type .chroma,.hack .card .highlight:last-of-type .chroma,.hack .alert pre:last-of-type,.hack .alert p:last-of-type,.hack .card pre:last-of-type,.hack .card p:last-of-type{margin-bottom:unset}.hack blockquote,.hack blockquote:after{line-height:1.5}.hack figure,.standard figure{margin:unset}.hack figure a{border-bottom:none}.hack figure a:hover{background-color:inherit}article header img{width:100%;border-radius:3px}table td,table th{line-height:inherit}table a{border-bottom:unset}img{max-width:100%}@media only screen and (min-width:768px){html{font-size:16px}.container{max-width:50rem}}@media only screen and (min-width:768px),(-ms-high-contrast:active),(-ms-high-contrast:none){html{margin-left:calc(100vw - 100%)}}/*!
 * Copyright (C) 2019  Josh Habdas <jhabdas@protonmail.com>
 *
 * This file is part of After Dark.
 *
 * After Dark is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * After Dark is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

a[rel*="external"]::after {
  content: " " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%23ff9800'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");
}
nav a.active {
  background-color: inherit;
  color: #fff;
}
a[itemprop="url"] {
  color: #ff9800;
}
a[itemprop="url"]:hover {
  color: #fff;
}
.muted, .help-block {
  opacity: 0.70;
}
.hack .muted,
.hack .help-block {
  color: #e0e0e0;
}
</style>
        


  
    <meta name="theme-color" content=#000>
  


      
    
  


    
    
      <script integrity="sha512-ISTAV0GadOIz/NXXHOS+eCM0ysXVVHhQTlvA6LJxz/DeA5yIxm0Vqf5IE+WH0yuuXkayAKtoZkQ326nch5f/fg==">fetchInject(["/css/syntax.css"]);</script>
      <noscript>
        <link href="/css/syntax.css" rel="stylesheet">
      </noscript>
    
  </head>
  
  
  
  <body class="hack dark main container">
    <header>
  

  
    
      
      

    
  


</header>
    <main>
  
    
      <style>{{ -}}.hack header figure[itemtype*=ImageObject]{position:relative}.hack header figure[itemtype*=ImageObject] figcaption{position:absolute;bottom:0;right:0;text-align:right;padding:15px;font-style:oblique;font-size:smaller;mix-blend-mode:soft-light}.hack header figure[itemtype*=ImageObject] [itemprop=headline]{font-weight:700}</style>
    
  
  <article itemscope itemtype="https://schema.org/BlogPosting">
    <meta itemprop="name" content="Autoformatação de Código ― Quando e Como">
<meta itemprop="description" content="Uma descrição da minha jornada desde odiar formatadores automáticos até usá-los em tudo">
<meta itemprop="datePublished" content="2020-05-13T20:49:47-03:00" />
<meta itemprop="dateModified" content="2020-05-13T20:49:47-03:00" />
<meta itemprop="wordCount" content="1311">
<meta itemprop="image" content="https://source.unsplash.com/collection/983219/2000x1322"/>



<meta itemprop="keywords" content="black,python," />
    <header>
      <h1 itemprop="headline name">Autoformatação de Código ― Quando e Como</h1>
      <p class="muted">
        <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <circle cx="16" cy="16" r="14" />
  <path d="M16 8 L16 16 20 20" />
</svg>
<span>7 minute read</span>
<svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z" />
</svg>

  Published: <time datetime="2020-05-13T20:49:47-03:00">13 May, 2020</time>


      </p>
      
        <blockquote itemprop="description">Uma descrição da minha jornada desde odiar formatadores automáticos até usá-los em tudo</blockquote>
      
      



    </header>
    
  <summary>Conteúdo</summary>
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introdução">Introdução</a></li>
        <li><a href="#black">Black</a></li>
        <li><a href="#explorando-erros-com-pylint">Explorando Erros com Pylint</a></li>
        <li><a href="#verificando-possíveis-mudanças">Verificando Possíveis Mudanças</a></li>
        <li><a href="#reformatando-com-black">Reformatando com Black!</a></li>
        <li><a href="#usando-black-no-dia-a-dia">Usando Black no dia-a-dia</a>
          <ul>
            <li><a href="#configuração-global">Configuração Global</a></li>
            <li><a href="#configuração-local">Configuração Local</a></li>
          </ul>
        </li>
        <li><a href="#autoformatar-ao-salvar-ou-não">Autoformatar ao salvar ou não?</a></li>
      </ul>
    </li>
  </ul>
</nav>



    <div itemprop="articleBody">
      <div class="alert alert-info">
  <p><strong>TL; DR:</strong> Use o índice para ir direto ao ponto que você quer, por
exemplo <a href="/post/2020-05-13-autoformat-black/#reformatando-com-black">Reformatando com Black!</a></p>

</div>


<h2 id="introdução">Introdução</h2>
<p>Fazer um código legível e bonito é algo importante no nosso dia-a-dia, especialmente
quando colaboramos com demais colegas. Um código que é mal formatado e mal estruturado
é cansativo de ler e difícil de entender o que ele faz.</p>
<p>A formatação de um código é só um pedaço da história, mas um pedaço muito importante.
Ela não é a única responsável pela legibilidade do código ― um projeto mal estruturado,
com classe e funções com responsabilidades mal definidas pode até ser bem formatado,
mas será difícil de compreender.</p>
<p>No começo de minha carreira, eu não gostava muito da ideia de formatação automática
de código. Por um lado, eu acho que eu era um pouco orgulhoso em relação à isso
e não estava afim de perder &ldquo;controle&rdquo;. Por outro lado, mais de 10 anos atrás,
essas ferramentas não eram exatamente boas, pelo menos não as que eu conhecia.</p>
<p>Quanto ao primeiro argumento, hoje eu vejo essa resistência à perda do &ldquo;controle&rdquo;
como algo meio bobo. A formatação do código por mais importante que seja, não é
exatamente o foco do trabalho de um desenvolvedor ou sua finalidade. O centro
do nosso trabalho é a abstração de problemas do mundo real para dentro de um
algoritmo e a solução desse problema através de ferramentas computacionais, levando
em consideração as restrições de projeto que temos.</p>
<p>Além disso, se nosso código deve seguir um livro de estilo padronizado, qual é o mérito
em gastar tempo e esforço para cumprir um padrão definido? Humanos são bons em
criar, em fazer coisas novas. É aí que mora nosso diferencial, o que for automatizável,
podemos deixar que o computador faça por nós e nos deixe mais livres.</p>
<p>Já em relação ao segundo argumento, hoje nós temos diversas ferramentas de
formatação automática que são cada vez mais robustas. O foco do restante desse
artigo é o <a href="https://github.com/psf/black">Black</a>, um formatador automático para
Python.</p>
<h2 id="black">Black</h2>
<p>A instalação do Black pode ser feita usando <code>pip install black</code> . Se seu
ambiente estiver bem configurado, você conseguirá digitar <code>black --help</code> em seu
terminal e ver algumas de suas opções de uso. Caso você queira, pode explorar
o funcionamento dele no <a href="https://black.now.sh">Black Playground</a>.</p>
<p>O Black permite diversas formas de execução. Podemos, por exemplo, invocá-lo direto
da linha de comando com uma string de código:</p>
<pre><code>black -c &quot;x=2  * 3+4&quot;
</code></pre><p>E ele te retornará a expressão propriamente formatada, <code>x = 2 * 3 + 4</code> com os
espaços corretos.</p>
<h2 id="explorando-erros-com-pylint">Explorando Erros com Pylint</h2>
<p>Considere agora esse código, bem mal formatado mas ainda assim é válido:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Módulo que oferece um fatorial iterativo
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="k">def</span> <span class="nf">fatorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>

    <span class="n">result</span><span class="o">=</span><span class="mi">1</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
        <span class="n">result</span><span class="o">*=</span><span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">print</span><span class="p">(</span>  <span class="n">fatorial</span><span class="p">(</span>   <span class="mi">3</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">fatorial</span><span class="p">(</span><span class="mi">2</span>     <span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">fatorial</span><span class="p">(</span><span class="mi">10</span>     <span class="p">))</span>

</code></pre></td></tr></table>
</div>
</div><p>Uma forma de avaliarmos a situação desse código é usando o <code>pylint</code> . Esse arquivo
está salvo em minha máquina como &ldquo;black_sample01.py&rdquo;. Rodando <code>pylint black_sample01.py</code> ,
nos dá a seguinte resposta:</p>
<div class="card">
  <header class="card-header">Resultado do PyLint</header>
  <div class="card-content">
    <div class="inner">
<pre><code>
************* Module black_sample01
black_sample01.py:2:10: C0326: Exactly one space required around assignment

    result=1

          ^ (bad-whitespace)

black_sample01.py:7:0: C0325: Unnecessary parens after 'in' keyword (superfluous-parens)
black_sample01.py:8:14: C0326: Exactly one space required around assignment

        result*=i
              ^^ (bad-whitespace)

black_sample01.py:11:5: C0326: No space allowed after bracket
print(  fatorial(   3))

     ^ (bad-whitespace)

black_sample01.py:11:16: C0326: No space allowed after bracket
print(  fatorial(   3))

                ^ (bad-whitespace)

black_sample01.py:12:21: C0326: No space allowed before bracket
print(fatorial(2     ))

                     ^ (bad-whitespace)

black_sample01.py:13:0: C0304: Final newline missing (missing-final-newline)
black_sample01.py:13:22: C0326: No space allowed before bracket
print(fatorial(10     ))

                      ^ (bad-whitespace)

black_sample01.py:1:0: C0114: Missing module docstring (missing-module-docstring)
black_sample01.py:1:0: C0103: Argument name &quot;n&quot; doesn't conform to snake_case naming style (invalid-name)
black_sample01.py:1:0: C0116: Missing function or method docstring (missing-function-docstring)

--------------------------------------------------------------------
Your code has been rated at -3.75/10

</code></pre></div>
  </div>
</div>
<p>Existem erros de parênteses desnecessários, erros de espaço em branco e várias
linhas desnecessárias também. Podemos agora explorar o <code>black</code> .</p>
<h2 id="verificando-possíveis-mudanças">Verificando Possíveis Mudanças</h2>
<p>Chamando o black com a flag <code>--check</code> , ele apenas nos conta se o arquivo seria
reformatado ou não. Isso é útil para usar em servidores de CI e evitar que arquivos
mal formatados subam para a base:</p>
<div class="card">
  <header class="card-header"></header>
  <div class="card-content">
    <div class="inner">
<pre><code>
$ black --check black_sample01.py

would reformat black_sample01.py
Oh no! 💥 💔 💥
1 file would be reformatted.

</code></pre></div>
  </div>
</div>
<p>(<em>Mais sobre CI e ferramentas assim em breve!</em>)</p>
<p>Nós podemos usar a flag <code>--diff</code> para ver as mudanças que seriam feitas:</p>
<div class="card">
  <header class="card-header">black --diff</header>
  <div class="card-content">
    <div class="inner">
<pre><code>
$ black --diff black_sample01.py

--- black_sample01.py	2020-05-20 13:52:23.495800 +0000
+++ black_sample01.py	2020-05-20 13:55:56.786380 +0000
@@ -2, 19 +2, 16 @@
 Módulo que oferece um fatorial iterativo
 &quot;&quot;&quot;

 def fatorial(n):

*    result=1
*    result = 1

-
-
-

*    for i in(range(1, n+1)):
*        result*=i
*    for i in range(1, n + 1):
*        result *= i

     return result

+print(fatorial(3))
+print(fatorial(2))
+print(fatorial(10))

-print(  fatorial(   3))
-print(fatorial(2     ))
-print(fatorial(10     ))
reformatted black_sample01.py
All done! ✨ 🍰 ✨
1 file reformatted.

</code></pre></div>
  </div>
</div>
<p>Honestamente, é meio raro eu usar essas duas flags no meu dia-a-dia. Uma situação
em que eu costumo usar a <code>--diff</code> é quando eu estou trabalhando em uma base de
código pela primeira vez e estou pensando se vou ou não sugerir uma mudança de
estilo. Rodar o <code>--diff</code> me permite estimar o quão trabalhoso seria reformatar
a base toda. Já a flag <code>--check</code> eu uso em servidores de CI (Integração Contínua)
mesmo.</p>
<h2 id="reformatando-com-black">Reformatando com Black!</h2>
<p>E finalmente a reformatação é bem direta. Basta invocar o <code>black</code> sem flags
e com o arquivo:</p>
<pre><code>
$ black black_sample01.py

reformatted black_sample01.py
All done! ✨ 🍰 ✨
1 file reformatted.

</code></pre><p>O arquivo em si será modificado:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="s2">&#34;&#34;&#34;
</span><span class="s2">Módulo que oferece um fatorial iterativo
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="k">def</span> <span class="nf">fatorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">print</span><span class="p">(</span><span class="n">fatorial</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">fatorial</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">fatorial</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

</code></pre></td></tr></table>
</div>
</div><h2 id="usando-black-no-dia-a-dia">Usando Black no dia-a-dia</h2>
<p>Okay, formatamos <em>um</em> arquivo! Mas como garantir isso ao longo do processo?
Eu gosto de usar três abordagens diferentes:</p>
<ul>
<li>Direto no meu editor de texto</li>
<li>Como um hook <em>pre-commit</em> no git</li>
<li>No servidor de CI</li>
</ul>
<p>A parte do hook e do CI merecem um artigo só pra elas. Quanto ao editor, seja
lá qual for seu editor, ele
<a href="https://github.com/psf/black/blob/master/docs/editor_integration.md">provavelmente já tem uma integração com o Black</a>.</p>
<p>Ultimamente, tenho usado o <a href="https://code.visualstudio.com/">VSCode</a> como editor
principal. A configuração no VSCode pode ser global ou específica de projeto.
Uma vez habilitado, você pode autoformatar seu código apertando <code>CTRL + Shift + I</code></p>
<h3 id="configuração-global">Configuração Global</h3>
<p>No caso da configuração global, abra as configurações em <code>File &gt; Preferences &gt; Settings</code> ou digite <code>CTRL + ,</code> . Na barra de busca, digite &ldquo;python formatting provider&rdquo;.
Você deverá ver essa opção:</p>










<figure>
  <img class="lazyload" data-src="/img/vscode-black.png"  itemprop="image">
  
    <figcaption>
      
        <header itemprop="name"><b>Configuração do Black no VSCode</b></header>
      
      
    </figcaption>
  
</figure>


<p>Selecione &ldquo;black&rdquo; na lista e pronto!</p>
<h3 id="configuração-local">Configuração Local</h3>
<p>A configuração local de projetos é feita através do arquivo <code>.vscode/settings.json</code> .
Basta adicionar nele a chave <code>&quot;python.formatting.provider&quot;: &quot;black&quot;</code> para habilitar
o black no seu projeto atual.</p>
<h2 id="autoformatar-ao-salvar-ou-não">Autoformatar ao salvar ou não?</h2>
<p>Tudo isso que a gente fez habilitou a invocação <code>manual</code> do Black ― você precisa
apertar <code>CTRL + Shift + I</code> para formatar o código. O VSCode e muitos outros
editores dão uma outra opção ― autoformatar ao salvar.</p>
<p>Particularmente, eu deixo essa opção desativada nas configurações globais. Muitas
vezes eu trabalho em código que envolve outros colegas, em projetos que não usam
black ou que simplesmente possuem um padrão de formatação diferente. Autoformatar
nesses casos é ruim.</p>
<p>Projetos com código &ldquo;feio&rdquo; ou seguindo um padrão de formatação diferente, podem
ser problemáticos. Mas mais problemático ainda é quebrar a consistência interna
do projeto. Usar <code>CamelCase</code> para dar nomes em variáveis não é comum em Python
e o <code>PyLint</code> vai reclamar disso. Porém, se você está trabalhando em um projeto
que usa CamelCase para tudo, mantenha a consistência e ― talvez ― proponha a
mudança de padrão em um segundo momento. Mas isso é assunto pra outro post!</p>
    </div>
    <footer>
      <hr>
      <p>
  Published
  
    
      by <span itemprop="author"></span>
    
  
  <time itemprop="datePublished" datetime="2020-05-13T20:49:47-03:00">
    13 May, 2020
  </time>
  
    in <span itemprop="articleSection"><a href="/categories/estilo-de-c%C3%B3digo/">estilo de código</a> and <a href="/categories/python/">python</a></span>
  
  
    and tagged <a rel="tag" href="/tags/black/">black</a> and <a rel="tag" href="/tags/python/">python</a>
  
  using <span itemprop="wordCount">1311</span> words.
</p>

      




    </footer>
  </article>
</main>
    <footer>
  <small class="muted">
    
  
    
      Copyright &copy; 2020 Felipe Bidu.
      
        Licensed under <a  target="_blank" rel="external noopener license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
      
    
  


  </small>
</footer>
    
    
    
      
    
  </body>
</html>
